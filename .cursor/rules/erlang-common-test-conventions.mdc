---
alwaysApply: true
description: Erlang Common Test conventions for suites and test cases.
globs:
  - "**/*_SUITE.erl"
  - "test/**/*.erl"
---

Common Test conventions for this project:

- Start long-running deps (like `vice`) in `init_per_suite/1` and stop them in `end_per_suite/1`.
- Do not change directories within test cases; the default working directory is a per-test folder under the suite `priv_dir` and is suitable for emitting artifacts like `.sig` files.
- Prefer cleanup in `end_per_testcase/2` (e.g., delete generated `*.sig` files) instead of `try ... after` in each test.
- Use pattern matching for assertions where appropriate to allow tests to fail fast (e.g., `{ok, Path} = videdup:write_signature(Video)`).

